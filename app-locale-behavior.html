<!--
@license
Copyright (c) 2017 The expand.js authors. All rights reserved.
This code may only be used under the BSD style license found at https://expandjs.github.io/LICENSE.txt
The complete set of authors may be found at https://expandjs.github.io/AUTHORS.txt
The complete set of contributors may be found at https://expandjs.github.io/CONTRIBUTORS.txt
-->

<!--
A behavior used to add localization capabilities on a web component.

@behavior app-locale-behavior
@since 1.0.0
@category behaviors
@description A behavior used to add localization capabilities on a web component
@keywords expandjs, web app, web components

@homepage https://expandjs.com/components/app-locale-behavior
@repository https://github.com/expandjs/app-behaviors
@source https://github.com/expandjs/app-behaviors/blob/master/app-locale-behavior.html

@behavior xp-base-behavior /bower_components/xp-elements/xp-base-behavior.html
-->

<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../expandjs/expandjs.html">
<link rel="import" href="../xp-elements/xp-base-behavior.html">

<script>
    Polymer.APPLocaleBehaviorImp = {

        /**
         * Set the application's locale.
         *
         * @method setLocale
         * @param {string} locale
         */
        setLocale(locale) {

            // Asserting
            XP.assertArgument(XP.isString(locale, true), 1, 'string');

            // Ensuring
            this.ensure('app.locale', locale);
        },

        /*********************************************************************/

        // PROPERTIES
        properties: {

            /**
             * Returns a localized string.
             *
             * @method localize
             * @param {Array | Object | string} string
             * @param {Object} [replacements]
             * @returns {Array | Object | string}
             */
            localize: {
                computed: '_computeLocalize(app.i18n, app.locale, app.i18n.*)',
                type: Function
            }
        },

        /*********************************************************************/

        // COMPUTER
        _computeLocalize(i18n, locale) {
            return XP.localize.bind(XP, i18n && i18n[locale]);
        }
    };

    /**
     * @polymerBehavior Polymer.APPLocaleBehavior
     */
    Polymer.APPLocaleBehavior = [
        Polymer.XPBaseBehavior,
        Polymer.APPLocaleBehaviorImp
    ];
</script>
