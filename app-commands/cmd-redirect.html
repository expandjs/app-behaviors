<!--
@license
Copyright (c) 2017 The expand.js authors. All rights reserved.
This code may only be used under the BSD style license found at https://expandjs.github.io/LICENSE.txt
The complete set of authors may be found at https://expandjs.github.io/AUTHORS.txt
The complete set of contributors may be found at https://expandjs.github.io/CONTRIBUTORS.txt
-->

<!--
A web component used to add the `redirect` command on the parent store.

@element cmd-redirect
@since 1.0.0
@category functionality
@description A web component used to add the `redirect` command on the parent store
@keywords expandjs, web app, web components

@homepage https://expandjs.com/components/cmd-redirect
@repository https://github.com/expandjs/app-behaviors
@source https://github.com/expandjs/app-behaviors/blob/master/cmd-redirect.html

@behavior app-command-behavior /bower_components/app-behaviors/app-command-behavior.html
-->

<link rel="import" href="../../polymer/polymer.html">
<link rel="import" href="../../expandjs/expandjs.html">
<link rel="import" href="../app-command-behavior.html">

<dom-module id="cmd-redirect">

    <template strip-whitespace>

        <style>
            :host {
                display: none !important;
            }
        </style>

    </template>

    <script>
        Polymer({

            // ELEMENT
            is: 'cmd-redirect',

            // BEHAVIORS
            behaviors: [
                Polymer.APPCommandBehavior
            ],

            /*********************************************************************/

            /**
             * Implements the `execute` strategy.
             *
             * @method _execute
             * @param {Object} options
             *   @param {string} options.href
             * @param {Function} [callback]
             * @private
             */
            _execute(options, callback) {

                // Asserting
                if (!XP.isString(options.href, true)) { callback(new XP.ValidationError('options.href', 'string')); return; }

                // Preventing
                if (!this.router) { callback(); return; }

                // Redirecting
                this.router.redirect(options.href, callback);
            }
        });
    </script>

</dom-module>
